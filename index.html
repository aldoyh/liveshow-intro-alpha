<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XYZ - Splash Screen (Slow Motion)</title>
    <meta name="description" content="Cinematic splash screen with physics-based animation">
    
    <!-- GSAP for Professional Animation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js" integrity="sha512-7eHRwcbYkK4d9g/6tD/mhkf++eoTHwpNM9woBxtPUBWm67zeAfFC+HrdoE2GanKeocly/VxeLvIqwvCdk7qScg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    
    <!-- Tailwind for Layout & Theme -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts for Better Typography -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    
    <style>
        :root {
            /* Shadcn-inspired palette (Zinc & Violet) */
            --background: #09090b;
            --foreground: #fafafa;
            --primary: #7c3aed;
            --primary-foreground: #fafafa;
            --secondary: #27272a;
            --muted: #27272a;
            --accent: #7c3aed;
            --accent-bright: #a78bfa;
        }

        * {
            box-sizing: border-box;
        }

        body {
            background-color: var(--background);
            color: var(--foreground);
            overflow: hidden;
            margin: 0;
            padding: 0;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            width: 100vw;
            height: 100vh;
        }

        #splash-container {
            position: fixed;
            inset: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            background-color: var(--background);
        }

        /* The Clock Weight (Plumb Bob) styling */
        .plumb-bob {
            filter: drop-shadow(0 0 25px rgba(124, 58, 237, 0.6));
            transition: filter 0.3s ease;
        }

        .bob-metal {
            fill: url(#bobGradient);
            stroke: var(--primary);
            stroke-width: 0.5;
        }

        .logo-text {
            font-weight: 900;
            letter-spacing: -0.05em;
            font-size: clamp(3rem, 10vw, 5rem);
            opacity: 0;
            transform: scale(0.8);
            pointer-events: none;
            line-height: 1;
            user-select: none;
            text-align: center;
            background: linear-gradient(135deg, var(--accent-bright), var(--primary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* Background Grain Overlay for Premium Feel */
        .noise {
            position: fixed;
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%;
            opacity: 0.03;
            pointer-events: none;
            background-image: url('data:image/svg+xml,%3Csvg viewBox="0 0 400 400" xmlns="http://www.w3.org/2000/svg"%3E%3Cfilter id="noiseFilter"%3E%3CfeTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="4" stitchTiles="stitch"/%3E%3C/filter%3E%3Crect width="100%25" height="100%25" filter="url(%23noiseFilter)"/%3E%3C/svg%3E');
            z-index: 10;
            mix-blend-mode: overlay;
        }

        /* Skip button styling */
        #skip-btn {
            cursor: pointer;
            border: none;
            background: transparent;
            padding: 0.5rem 1rem;
            transition: all 0.3s ease;
            border-radius: 0.25rem;
        }

        #skip-btn:hover {
            background: rgba(124, 58, 237, 0.1);
        }

        #skip-btn:focus {
            outline: 2px solid var(--primary);
            outline-offset: 2px;
        }

        /* SVG container improvements */
        #anchor {
            overflow: visible;
            max-height: 90vh;
        }

        /* Accessibility improvements */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        /* Loading indicator for slow connections */
        .loading-indicator {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: var(--primary);
            font-size: 0.875rem;
            opacity: 0.5;
        }
    </style>
</head>
<body>

    <div class="noise" aria-hidden="true"></div>

    <div id="splash-container" role="main" aria-label="Splash screen animation">
        <div class="loading-indicator" id="loading">Loading...</div>
        
        <!-- The Physics Element: String and Bob -->
        <svg id="anchor" width="200" height="100vh" viewBox="0 0 200 800" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <defs>
                <linearGradient id="bobGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" style="stop-color:#a78bfa;stop-opacity:1" />
                    <stop offset="50%" style="stop-color:#7c3aed;stop-opacity:1" />
                    <stop offset="100%" style="stop-color:#4c1d95;stop-opacity:1" />
                </linearGradient>
                
                <filter id="glow">
                    <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
                    <feMerge>
                        <feMergeNode in="coloredBlur"/>
                        <feMergeNode in="SourceGraphic"/>
                    </feMerge>
                </filter>
            </defs>
            
            <!-- The String (Dashed for clock look) -->
            <path id="string" d="M100,0 L100,-500" stroke="#71717a" stroke-width="1.5" stroke-dasharray="4 2" stroke-linecap="round" />
            
            <!-- The Plumb Bob Weight -->
            <g id="weight-group">
                <path class="plumb-bob bob-metal" d="M100,40 L115,10 L100,0 L85,10 Z" filter="url(#glow)" />
                <circle cx="100" cy="0" r="3" fill="#71717a" />
            </g>
        </svg>

        <!-- Final Logo -->
        <div id="logo" class="logo-text absolute" aria-label="XYZ Logo">XYZ</div>
        
        <!-- Subtle Skip Prompt -->
        <button 
            id="skip-btn" 
            class="absolute bottom-12 text-zinc-500 text-xs uppercase tracking-widest opacity-0 hover:text-white transition-colors"
            aria-label="Skip intro animation"
            tabindex="0">
            Skip Intro
        </button>
    </div>

    <script>
        // Check if GSAP loaded
        if (typeof gsap === 'undefined') {
            console.error('GSAP failed to load');
            document.getElementById('loading').textContent = 'Error loading animation library';
        }

        window.addEventListener('load', () => {
            // Hide loading indicator
            const loadingIndicator = document.getElementById('loading');
            if (loadingIndicator) {
                loadingIndicator.style.display = 'none';
            }

            // Check for reduced motion preference
            const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
            
            // Every duration has been doubled for a more dramatic, cinematic effect
            const tl = gsap.timeline({
                onComplete: () => {
                    // Logic for post-animation
                    console.log('Splash animation complete');
                    // You can add navigation or other logic here
                    // Example: window.location.href = '/home';
                }
            });

            const string = document.querySelector('#string');
            const weight = document.querySelector('#weight-group');
            const logo = document.querySelector('#logo');
            const skip = document.querySelector('#skip-btn');
            const anchor = document.querySelector('#anchor');

            // Set initial hidden state for weight
            gsap.set(weight, { y: -500 });
            gsap.set(string, { attr: { d: "M100,0 L100,-500" } });

            if (prefersReducedMotion) {
                // Fast animation for users who prefer reduced motion
                tl.to(weight, { y: 500, duration: 0.3, ease: "power2.out" })
                  .to(logo, { opacity: 1, scale: 1, duration: 0.3 }, "-=0.1");
                return;
            }

            // 1. THE DROP: Doubled to 2.8s with improved bounce physics
            tl.to(weight, {
                y: 500,
                duration: 2.8,
                ease: "bounce.out",
                onUpdate: function() {
                    const currentY = gsap.getProperty(weight, "y");
                    // Update string path to follow the weight
                    string.setAttribute('d', `M100,0 L100,${currentY}`);
                }
            });

            // 2. THE DANGLE: Harmonic motion doubled with improved timing
            tl.to(anchor, {
                rotation: 8,
                duration: 1.2,
                transformOrigin: "top center",
                ease: "power2.inOut"
            }, "-=0.6")
            .to(anchor, {
                rotation: -5,
                duration: 1.6,
                ease: "power2.inOut"
            })
            .to(anchor, {
                rotation: 0,
                duration: 4.0,
                ease: "elastic.out(1, 0.3)"
            });
            
            // Show skip button during the slower dangle
            tl.to(skip, { 
                opacity: 1, 
                duration: 2,
                ease: "power2.inOut"
            }, "-=3.0");

            // 3. THE SCARE: Doubled tension and explosion with improved visuals
            tl.to(weight, {
                y: "+=20",
                duration: 0.8,
                ease: "power4.in"
            }, "+=1.0")
            .to(weight, {
                scale: 60,
                opacity: 0,
                duration: 1.6,
                ease: "expo.inOut",
                transformOrigin: "center center"
            })
            .to(string, {
                opacity: 0,
                duration: 0.4
            }, "<")
            .to("body", {
                backgroundColor: "#000000",
                duration: 1.0,
                ease: "power2.inOut"
            }, "<");
            
            // 4. LOGO REVEAL: Doubled reveal time with enhanced entrance
            tl.to(logo, {
                opacity: 1,
                scale: 1,
                duration: 2.4,
                ease: "back.out(1.2)"
            }, "-=0.8")
            .to(logo, {
                textShadow: "0 0 40px rgba(124, 58, 237, 0.7), 0 0 80px rgba(124, 58, 237, 0.3)",
                duration: 4,
                repeat: -1,
                yoyo: true,
                ease: "sine.inOut"
            });

            // Skip functionality - smooth acceleration
            const skipAnimation = () => {
                tl.timeScale(5); // Speed up significantly to "skip" smoothly
                skip.style.pointerEvents = 'none'; // Prevent multiple clicks
            };

            skip.addEventListener('click', skipAnimation);
            skip.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    skipAnimation();
                }
            });

            // Optional: Skip on ESC key
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    skipAnimation();
                }
            });
        });

        // Error handling
        window.addEventListener('error', (e) => {
            console.error('Animation error:', e);
        });
    </script>
</body>
</html>
